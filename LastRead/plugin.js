(function(l,c){"use strict";const{getUser:u,getCurrentUser:d}=l.findByProps("getCurrentUser","getUser"),{getChannel:h}=l.findByProps("getChannel","hasChannel"),{getMessages:o}=l.findByProps("getMessages"),g=l.findByPropsAll("getChannelId")[1].getChannelId;let y;const m=e=>{var a=u(e.userId),t=h(e.channelId);if(!(!a||!t)&&t.type==1){var s=o(e.channelId)._array.filter(n=>n.author.id==d().id),r=s[s.length-1];r&&e.userId!=d().id&&!r.content.toLowerCase().includes("last read @")&&(r.content+=` (**Last Read @ ${new Date().toLocaleString()} by ${a.username}**)`,c.log(`${a.username} has seen your last message.`))}},f=e=>{var a=u(e.message.author.id),t=h(e.channelId);if(!(!a||!t)&&t.type==1){var s=o(e.channelId)._array.filter(n=>n.author.id==d().id),r=s[s.length-1];r&&e.message.author.id!=d().id&&!r.content.toLowerCase().includes("last read @")&&(r.content+=` (**Last Read @ ${new Date().toLocaleString()} by ${a.username}**)`,c.log(`${a.username} has seen your last message.`))}},L=e=>{var a=o(g())._array.filter(i=>i.id==e.id)[0],t=u(a.author.id),s=h(g());if(!(!t||!s)&&s.type==1){var r=o(g())._array.filter(i=>i.author.id==d().id),n=r[r.length-1];n&&t.id!=d().id&&!n.content.toLowerCase().includes("last read @")&&(n.content+=` (**Last Read @ ${new Date().toLocaleString()} by ${t.username}**)`,c.log(`${t.username} has seen your last message.`))}},p=e=>{var a=u(e.message.author.id),t=h(e.channelId),s=e.message.author;if(!(!a||!t)&&t.type==1){var r=o(e.channelId)._array.filter(i=>i.author.id==d().id),n=r[r.length-1];n&&s.id!=d().id&&!n.content.toLowerCase().includes("last read @")&&(n.content+=` (**Last Read @ ${new Date().toLocaleString()} by ${s.username}**)`,c.log(`${a.username} has seen your last message.`))}};var C=()=>({onLoad:()=>{y=cumcord.patcher.findAndPatch(()=>cumcord.modules.webpack.findByProps("dispatch","register"),e=>cumcord.patcher.after("dirtyDispatch",e,(a,t)=>{switch(a[0].type){case"TYPING_START":m(a[0]);break;case"MESSAGE_CREATE":f(a[0]);break;case"MESSAGE_DELETE":L(a[0]);break;case"MESSAGE_UPDATE":p(a[0]);break}}))},onUnload:()=>{y()}});return C})(cumcord.modules.webpack,cumcord.utils.logger);
